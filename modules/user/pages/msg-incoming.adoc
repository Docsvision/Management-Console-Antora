= Очередь входящих сообщений

<<test,тест>>

:msg: входящих
:caps: Входящие
:type: входящие
:img: in
include::partial$queue-widget.adoc[]

Администратор может использовать данный виджет, чтобы проанализировать текущую ситуацию в системе {dv}. Если появляются сообщения с ошибками или блокировками, администратор должен перейти на страницу _Очередь входящих сообщений_ и оттуда на страницу xref:block-error-log.adoc["Ошибки и блокировки"].

.Пример использования виджета:
****
Например, в виджете отображается большое количество необработанных сообщений и блокировок. Это может говорить о том, что машина, обрабатывающая данные сообщения, вышла из строя или перегружена.
****

Разделение по сервисам позволяет сузить область поиска проблемы.

[#queue-page]
== Страница сообщений

.Страница "Очередь входящих сообщений"
image::in-text-page.png[Страница "Очередь входящих сообщений"]

Страница _Очередь входящих сообщений_ содержит информацию по всем входящим сообщениям. На странице отображаются только сообщения соединения, выбранного в виджете. Попасть на страницу можно только из виджета _Очередь входящих сообщений_.

include::partial$excerpts.adoc[tags=lazy-load]

[#test]
Строки входящих сообщений можно отфильтровать по <<service,сервису>> и по <<state,состоянию>> сообщения. Для фильтрации используются элементы, расположенные над таблицей -- раскрывающийся список слева и кнопки справа. При выборе значения в элементе, будут отфильтрованы будут все строки, а не только те, что загружены сейчас.

include::partial$excerpts.adoc[tags=list-filter]

Элемент с правой стороны -- кнопки -- отфильтрует сообщения по <<state,состоянию>>. Нажмите на кнопку, чтобы применить фильтр, нажмите ещё раз, чтобы снять. Такая фильтрация позволяет найти, например, все сообщения с ошибками или блокировками.

Также можно объединить фильтр по <<service,сервису>> и по <<state,состоянию>>, чтобы получить все сообщения, обработанные одним сервисом с ошибкой или блокировкой.

include::partial$excerpts.adoc[tags=filtered]

.Страница представляет собой таблицу со следующими колонками:
include::partial$parameters.adoc[tags=cr-date]
+
include::partial$parameters.adoc[tags=digest]
+
[#state]
* Состояние -- состояние обработки сообщения:
+
** _Обработано_ -- сообщение было обработано.
** _Не обработано_ -- сообщение ещё не обрабатывалось.
** _Ошибка_ -- обработка сообщения завершилась с ошибкой.
** _Блокировано_ -- при обработке сообщения возникла ошибка, но обработка не завершена. Указывается именно количество сообщений имеющих блокировку, а не количество блокировок.
+
Сообщение может содержать ошибку в любом состоянии, но если сообщение блокировано ошибкой, состояние будет: _Блокировано, ошибка_.
+
Если сообщение было обработано с ошибкой или блокировано, строка сообщения становится кликабельной. Нажмите на такую строку сообщения, чтобы перейти на страницу xref:block-error-log.adoc["Журнала ошибок и блокировок"].
+
include::partial$parameters.adoc[tags=service]
+
include::partial$parameters.adoc[tags=msg-type]
+
include::partial$parameters.adoc[tags=info]

//[#graph]
//== Графическая реализация
//
//Данный виджет предназначен для отображения статистики по обработке входящих сообщений в виде гистограммы. Данные группируются по сервисам обработки.
//
//Пользовательский интерфейс виджета представлен на следующем рисунке.
//
//image::widgetsOfWSInputMessagesAsGraph.png[Виджет Очередь входящих сообщений (графический)]
//
//Виджет содержит следующие элементы:
//
//* заголовок с названием виджета, датой последнего обновления отображаемой информации и кнопкой обновления;
//
//&gt; Данные автоматически обновляются с периодом 30 секунд.
//
//* поле для выбора подключения к {dv}, из которого будут загружаться данные;
//
//* легенду;
//
//* гистограмму, на которой для сервисом обработки представлено количественное соотношение сообщений с разными состояниями обработки: Не обработано, Блокировка и С ошибками. При щелчке по столбцу будет выполнен переход к странице xref:msg-search.adoc[Поиск сообщений карточки]. ==В требовании на страницу нет фильтров (отменены)==
