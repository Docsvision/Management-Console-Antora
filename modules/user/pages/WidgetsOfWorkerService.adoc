= Виджеты Службы рабочих процессов

== Очередь входящих сообщений. Текстовая форма**.

Отображает все текущие входящие сообщения отфильтрованные по дате создания (сегодня, вчера, за неделю, за все время) и распределенные по сервисам обработки. В первой реализации информация в виджете представлена в виде текста. Является кликабельным.

Пояснение: исторические данные по сообщениям отсутствуют, виджет показывает актуальное количество входящих сообщений.

image::widgetWSInputMessageText.png[Виджет «Очередь входящих сообщений. Текстовая форма»]

== Очередь исходящих сообщений. Текстовая форма**.

Отображает все исходящие сообщения отфильтрованные по дате создания (сегодня, вчера, за неделю, за все время) и распределенные по сервисам обработки. В первой реализации информация в виджете представлена в виде текста. Является кликабельным.

Виджет выводит все исходящие сообщения, созданные в указанный период (сегодня, вчера, за неделю, за все время).  Каждое исходящие имеет уникальный идентификатор RowID, Сервис обработки (Type ID) содержащиеся в секции Исходящие сообщения в карточке сообщения.

== **Поиск входящих сообщений карточки. Текстовая форма**.

По идентификатору карточки получить список входящих сообщений по ее обработке. В первой реализации информация в виджете представлена в виде простой таблицы. Является кликабельным.

1.  Виджет выводит информацию по идентификатору карточки (например, задания) - Oblect ID. Каждой карточке соответствует карточка сообщения, содержащая список входящих сообщений по указанной карточке. Каждое входящие имеет уникальный идентификатор RowID и состояние State, содержащиеся в карточке сообщения.
2.  Виджет выводит количество сообщений в каждом состоянии (обработано, необработано, ошибка) и количество сообщений имеющих блокировку (WaitingLocks/ObjectID) (Именно количество сообщений имеющих блокировку, а не количество блокировок)

image::widgetWSFindMessageByCardText.png[Виджет «Поиск входящих сообщений карточки. Текстовая форма»]

Настройки доступные пользователю

1.  Задать название виджету (пока нет)
2.  Задать используемую БД
3.  Задать идентификатор карточки

Функции доступные пользователю

1. Осуществить поиск по идентификатору
2.  Перейти на страницу, содержащую список сообщений карточки

. Виджет сохраняет пользовательские настройки при обновлении страницы/при переходе на другую страницу (Название виджета, БД)
.  Виджет автоматически обновляет данные с некой периодичностью (раз в 30с)
..  Обновление происходит для указанной в поиске карточки
.  При указанни нового идентификатора и осуществлении поиска, обновляется результат поиска и сохраняется новый ID карточки (предыдущий затирается)
.  Заголовок таблицы является кликабельным и позволяет перейти на страницу, содержащую список сообщений карточки **(см. требование https://vdv-youtrack.digdes.com/issue/GBL-1409)**. Страница автоматичесески открывается в том же окне. Путь к странице фиксруется в виде "хлебных крошек" (Дашборад/Виджет/Станица)

.Предупреждающие сообщения
1.  Если карточка не найдена об этом выводится сообщение "Карточка с идентификатором .... не найдена" (Card with ID ... is not found)
2.  Если карточка найдена, но не найдены сообщения, выводится сообщение "Входящие сообщения для карточки с идентификатором ... не найдены" (Incoming messages for card with ID ... are not found)
3.  Если введен идентификатор карточки, для которой не может быть создана карточка сообщений, выводится сообщение "Введен некорректный идентификатор. Для карточки с идентификатором ... входящих сообщений не существует" (You enter the wrong ID. Incoming messages with ID ... are not exist)

